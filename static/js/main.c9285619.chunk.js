(this["webpackJsonpamahack-web"]=this["webpackJsonpamahack-web"]||[]).push([[0],{37:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(29),s=c.n(r),i=c(9),o=(c(37),c(2)),l=c(11),d=c(4),u=c(5),j=c(30),m=c.n(j),b=window.localStorage.getItem("token")||null,O=function(){return b},h=function(){window.localStorage.removeItem("token"),window.location.assign("/signin")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=m.a.create(Object(d.a)({baseURL:"".concat("https://amahack-api-2.herokuapp.com","/api")},e));return t.interceptors.request.use((function(t){return!1!==e.useAccessToken?t.headers.common.Authorization="Bearer ".concat(O()):delete t.headers.common.Authorization,t})),t.interceptors.response.use((function(e){return e.data}),(function(t){return e.reloadOnUnathorized&&t.response&&[401,403].includes(t.response.status)&&h(),Promise.reject(t)})),t},f=p(),x=c(0),v=Object(n.createContext)();function g(e){var t=e.children,c=Object(n.useState)(null),a=Object(u.a)(c,2),r=a[0],s=a[1],i=function(){return f.get("/users/me").then((function(e){return s(e)}))};Object(n.useEffect)((function(){O()&&i()}),[]);var o={getUser:i,user:r};return Object(x.jsx)(v.Provider,{value:o,children:t})}var N=p({useAccessToken:!1,reloadOnUnauthorized:!1}),y=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,w={email:function(e){var t;return e?y.test(e)||(t="Email is invalid"):t="Email is required",t},password:function(e){var t;return e?e&&e.length<8&&(t="Password must have 8 character or more"):t="Password is required",t}},C=function(){var e=Object(o.f)().push,t=Object(n.useContext)(v).getUser,c=Object(n.useState)({fields:{email:"",password:""},errors:{email:w.email(),password:w.password()}}),a=Object(u.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)({}),j=Object(u.a)(i,2),m=j[0],O=j[1],h=function(){var e=r.errors;return!Object.keys(e).some((function(t){return e[t]}))},p=function(e){var t=e.target,c=t.name,n=t.value;s((function(e){return{fields:Object(d.a)(Object(d.a)({},e.fields),{},Object(l.a)({},c,n)),errors:Object(d.a)(Object(d.a)({},e.errors),{},Object(l.a)({},c,w[c]&&w[c](n)))}}))},f=function(e){var t=e.target.name;O((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},t,!0))}))},g=function(e){var t=e.target.name;O((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(l.a)({},t,!1))}))},y=r.fields,C=y.email,k=y.password,S=r.errors;return Object(x.jsx)("div",{className:"Login mt-4 container d-flex justify-content-center",children:Object(x.jsxs)("form",{onSubmit:function(c){var n,a=r.fields;c.preventDefault(),h()&&(n=a,N.post("/login",n)).then((function(c){var n;n=c.access_token,window.localStorage.setItem("token",n),b=n,t().then((function(){return e("/")}))}))},style:{maxWidth:500},children:[Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),Object(x.jsx)("input",{className:"form-control ".concat(m.email&&S.email?"is-invalid":""),type:"email",id:"email",name:"email",autoComplete:"off",value:C,onChange:p,onBlur:f,onFocus:g}),Object(x.jsx)("div",{className:"invalid-feedback",children:S.email})]}),Object(x.jsxs)("div",{className:"mb-3",children:[Object(x.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(x.jsx)("input",{className:"form-control ".concat(m.password&&S.password?"is-invalid":""),type:"password",id:"password",name:"password",value:k,onChange:p,onBlur:f,onFocus:g}),Object(x.jsx)("div",{className:"invalid-feedback",children:S.password})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-outline-primary",disabled:!h(),children:"Submit"})]})})},k=p(),S=function(e){return k.get("/products/".concat(e))};function E(e){var t=e.name,c=e.description,n=e.id,a=e.price,r=(e.user,e.image);return Object(x.jsxs)("div",{className:"Product card",style:{width:"18rem"},children:[Object(x.jsx)("img",{src:r,className:"card-img-top",alt:t}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:t}),Object(x.jsxs)("p",{className:"card-text",children:[c,Object(x.jsx)("br",{}),a/100," \u20ac"]}),Object(x.jsx)(i.b,{to:"/products/".concat(n),className:"btn btn-primary",children:"Detail"})]})]})}var F=function(e){var t=e.products;return Object(x.jsx)("div",{className:"Products d-flex flex-wrap justify-content-around mt-3",children:t.map((function(e){return Object(n.createElement)(E,Object(d.a)(Object(d.a)({},e),{},{key:e.id}))}))})},P=["Electronics","Computers","Home","Pets","Fashion"],T=function(e){var t=e.category,c=e.setCategory,n=e.active;return Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)("button",{className:"text-start nav-link text-white w-100 ".concat(n?"active":""),onClick:function(){return c(t)},children:t})})},A=function(e){var t=e.activeCategory,c=e.setCategory;return Object(x.jsx)("div",{className:"SideMenu shadow-lg bg-secondary min-vh-100 p-3",style:{width:200},children:Object(x.jsxs)("ul",{className:"nav nav-pills flex-column mb-auto",children:[Object(x.jsx)(T,{active:!t,category:"All",setCategory:function(){return c("")}}),P.map((function(e,n){return Object(x.jsx)(T,{active:t===e,category:e,setCategory:function(){return c(e)}},n)}))]})})},I=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(u.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){k.get("/products").then((function(e){o(e)}))}),[]),Object(x.jsxs)("div",{className:"Home d-flex",children:[Object(x.jsx)(A,{activeCategory:c,setCategory:a}),Object(x.jsx)(F,{products:i})]})},L=c.p+"static/media/amazhack.eee8bf89.svg",U=function(){var e=Object(n.useContext)(v).user;return Object(x.jsx)("header",{className:"Navbar bg-dark py-3 shadow",children:Object(x.jsx)("div",{className:"container-fluid",children:Object(x.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center",children:[Object(x.jsxs)(i.b,{to:"/",className:"d-flex align-items-center text-light text-decoration-none",children:[Object(x.jsx)("img",{className:"me-2",src:L,alt:"Amahack",height:40}),Object(x.jsx)("span",{className:"fw-bold h5 m-0",children:"Amahack"})]}),Object(x.jsx)("nav",{className:"d-inline-flex mt-2 mt-md-0 ms-md-auto",children:e?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{onClick:h,className:"btn btn-danger me-3 py-2 text-light text-decoration-none",children:"Log out"})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(i.c,{className:"me-3 py-2 text-light text-decoration-none",to:"/signin",exact:!0,children:"Sign in"}),Object(x.jsx)(i.c,{className:"me-3 py-2 text-light text-decoration-none",to:"/register",exact:!0,children:"Register"})]})})]})})})};function D(e){var t=e.productUser,c=e.productId,a=Object(n.useContext)(v).user;return Object(x.jsx)("div",{className:"LinkToEdit",children:(null===a||void 0===a?void 0:a.id)===t&&Object(x.jsx)(i.b,{to:"/products/".concat(c,"/edit"),className:"btn btn-primary",children:"Edit"})})}function z(){var e=Object(n.useState)(),t=Object(u.a)(e,2),c=t[0],a=t[1],r=Object(o.g)().id;return Object(n.useEffect)((function(){S(r).then((function(e){return a(e)}))}),[r]),c?Object(x.jsxs)("div",{className:"Product card",style:{width:"18rem"},children:[Object(x.jsx)("img",{src:c.image,className:"card-img-top",alt:c.name}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)("h5",{className:"card-title",children:c.name}),Object(x.jsxs)("p",{className:"card-text",children:[c.description,Object(x.jsx)("br",{}),c.price/100," \u20ac"]}),Object(x.jsx)(D,{productId:c.id,productUser:c.user})]})]}):"Loading..."}var B=c(32);function q(e){var t=e.name,c=e.id,n=e.value,a=e.error,r=e.onChange,s=e.formType,i=e.type,o=void 0===i?"text":i,l="".concat(s);return Object(x.jsxs)("div",{className:"form-group mt-3",children:[Object(x.jsx)("label",{htmlFor:c,children:t}),Object(x.jsx)(l,{type:o,className:"form-control ".concat(a&&"is-invalid"),id:c,value:n,onChange:r}),a&&Object(x.jsx)("div",{className:"invalid-feedback",children:a})]})}function H(){var e=Object(n.useState)({image:"",description:"",name:"",price:"",categories:[]}),t=Object(u.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)({}),s=Object(u.a)(r,2),i=s[0],j=s[1],m=Object(o.g)().id,b=Object(o.f)().push;Object(n.useEffect)((function(){S(m).then((function(e){return a(e)}))}),[m]);var O=function(e){a((function(t){var c=e.target.value;return"SELECT"===e.target.tagName?c=Object(B.a)(e.target.selectedOptions).map((function(e){return e.value})):"price"===e.target.id?c*=100:"file"===e.target.type&&(c=e.target.files[0]),Object(d.a)(Object(d.a)({},t),{},Object(l.a)({},e.target.id,c))}))};return Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;Object.entries(c).forEach((function(e){var c=Object(u.a)(e,2),n=c[0],a=c[1];return t.append(n,a)})),function(e,t){return k.put("products/".concat(t),e)}(t,m).then((function(){b("/")})).catch((function(e){400===e.response.status&&j(e.response.data.errors)}))},className:"container mt-3",children:[Object(x.jsx)(q,{value:c.name,error:i.name,onChange:O,id:"name",name:"Name",formType:"input"}),Object(x.jsx)(q,{value:c.description,error:i.description,onChange:O,id:"description",name:"Description",formType:"textarea"}),Object(x.jsx)(q,{value:c.price/100,error:i.price,onChange:O,id:"price",name:"Price (\u20ac)",formType:"input",type:"number"}),Object(x.jsx)(q,{error:i.image,onChange:O,id:"image",name:"Image",formType:"input",type:"file"}),Object(x.jsxs)("div",{className:"form-group mt-3",children:[Object(x.jsx)("label",{htmlFor:"categories",children:"Categories"}),Object(x.jsx)("select",{id:"categories",className:"form-control",value:c.categories,onChange:O,multiple:!0,children:P.map((function(e){return Object(x.jsx)("option",{children:e},e)}))})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Edit"})]})}var J=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(U,{}),Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{exact:!0,path:"/",component:I}),Object(x.jsx)(o.a,{exact:!0,path:"/products/:id/edit",component:H}),Object(x.jsx)(o.a,{exact:!0,path:"/products/:id",component:z}),Object(x.jsx)(o.a,{exact:!0,path:"/signin",component:C})]})]})},M=(c(62),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))});s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(i.a,{basename:"/amahack-web",children:Object(x.jsx)(g,{children:Object(x.jsx)(J,{})})})}),document.getElementById("root")),M()}},[[63,1,2]]]);
//# sourceMappingURL=main.c9285619.chunk.js.map